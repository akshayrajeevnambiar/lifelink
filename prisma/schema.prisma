generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // url line removed - now handled in prisma.config.ts
}

enum BloodGroup {
  A_POSITIVE
  A_NEGATIVE
  B_POSITIVE
  B_NEGATIVE
  AB_POSITIVE
  AB_NEGATIVE
  O_POSITIVE
  O_NEGATIVE
}

model Donor {
  id                String      @id @default(uuid())
  name              String
  bloodGroup        BloodGroup
  
  locationNormalized String
  locationDisplay    String
  
  phoneDigits        String
  phoneDisplay       String
  
  photoUrl           String?
  photoPublicId      String?
  
  isAvailable        Boolean    @default(true)
  lastDonationDate   DateTime?
  
  consentGiven       Boolean    @default(false)
  
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt
  
  @@index([bloodGroup])
  @@index([locationNormalized])
  @@index([phoneDigits])
  @@index([isAvailable])
  @@index([bloodGroup, locationNormalized, isAvailable])
  
  @@unique([phoneDigits, bloodGroup, locationNormalized])
}